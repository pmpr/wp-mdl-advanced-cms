(()=>{"use strict";var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=jQuery;var r=t.n(e);const n=r();var o;r()(document).ready((function(){function t(t){let e;if(e=t.val(),"checkbox"===t.attr("type")&&(e=t.prop("checked")?1:0),"radio"===t.attr("type")&&(e=t.closest(".cmb2-radio-list").find('input[type="radio"]:checked').val()),t.is(".wp-editor-area")&&"undefined"!=typeof tinymce){let r=tinymce.get(t.attr("id"));r&&(e=r.getContent())}return"string"==typeof e&&(e=PMPRUtil.escape(e)),e}function e(t,n=1){let o="";return 1===n&&(o+='"'),r().each(t,(function(t,r){"Object"===r.constructor.name?o+="("+e(r,n+1)+"),":o+=(r=t+"='"+r+"'").replace(/,/g,"|")+","})),o=o.replace(/,\s*$/,""),r().trim(o),1===n&&(o+='"'),o}function n(t){return r()("input:not([type=button]), select, textarea","#pr_ffm_"+t+"_content .pr-tabs-wrap")}r()(document).on("click",".shortcode-button-insert",(function(o){let i=r()(o.currentTarget),c=i.getCurrentShortcode();var l;o.preventDefault(),i.trigger("before_insert_shortcode",c),tinyMCE.activeEditor.fire("before_insert_shortcode",{shortcode:c}),l=i,window.wpActiveEditor="content",window.send_to_editor(function(o){let i=o.getCurrentShortcode();return function(t,n){let o=function(t,n){let o="[";return o+=t,r().each(n,(function(r,n){PMPRUtil.isEmpty(n)||("Object"===(n=PMPRTrigger.applyFilters(t+"_before_construct_"+r+"_value",n)).constructor.name?o+=" "+r+"="+e(n):o+=" "+r+'="'+n+'"')})),r().trim(o),o+="]",o}(t,n);return r()("#shortcode-"+t+"-content").trigger("shortcodeConstruct",[{construct:o,shortcode:t,attributes:n}]),PMPRTrigger.applyFilters("shortcode_construct",o,t,n)}(i,function(e){let o={},i=n(e);return r().each(i,(function(n,i){let c,l,a,s,d,u=r()(i);if(u.closest(".cmb-row").hasClass("cmb-repeat-group-field")){if(a=i.name.match(/\[(.*?)]/gi),a){if(l=i.name.replace(e+"_","").replace("[]","").split("[")[0],s=a[0].replace("[","").replace("]",""),d=a[1].replace(e+"_","").replace("[","").replace("]",""),""===l||""===n||""===d)return!0;c=t(r()(i)),PMPRUtil.isEmpty(c)||(void 0===o[l]?o[l]={[s]:{[d]:c}}:void 0===o[l][s]?o[l][s]={[d]:c}:o[l][s][d]=c)}}else if(u.closest(".cmb-row").hasClass("cmb-repeat-row")){if(l=i.name.replace(e+"_","").replace("[]",""),l=l.split("[")[0],""===l)return!0;if(void 0===o[l]){let t=i.name.split("[")[0],e=r()(i).closest(".cmb-tbody").find('[name^="'+t+'"]'),n=[];for(let t=0;t<e.length;t++){let o=r()(e[t]);o.val().length&&n.push(o.val())}o[l]=n.join(",")}}else l=PMPRUtil.getFieldShortId(u),c=t(u),PMPRUtil.isEmpties([l,c])||(o[l.replace(e+"_","")]=c)})),PMPRTrigger.applyFilters("shortcode_get_attribute",o,i)}(i))}(l)),l.hideModal(),function(t){let e=r()(this);PMPRUtil.isEmpty(t)&&(t=e.getCurrentShortcode());let o=n(t);PMPRUtil.isEmpty(o)||o.each(((t,e)=>{r()(e).val(null).trigger("change")}))}(c),i.trigger("after_insert_shortcode",c),tinyMCE.activeEditor.fire("after_insert_shortcode",{shortcode:c}),PMPRTrigger.doAction("close_ffm_modal",i)}))})),(o=n).fn.hideModal=function(){let t;t=o(this).closest(".shortcode-modal-container"),t.find(".shortcode-modal-close").trigger("click")},o.fn.getCurrentShortcode=function(){return o(this).closest(".pr-ffm-modal").find(".pr-ffm-modal-menu-item:not(.menu-parent).active").data("slug")},o.fn.getCurrentInput=function(){let t,e;return t=o(this),e=t.find("input"),(void 0===e||!e.length>0)&&(e=t),e},o.fn.getCurrentField=function(t,e){let r;return r=o(this),void 0===t&&(t=r.getCurrentInput()),void 0===e&&(e=r.getCurrentShortcode()),t.attr("name").replace(e+"_","")}})();