/*! For license information please see rating.0ZLXu8nL9.js.LICENSE.txt */
(()=>{"use strict";var t={668:(t,e,n)=>{n.r(e)}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=jQuery;var e=n.n(t);n(668);const i=e();var o;e()(document).ready((function(){let t=e()("body");PMPRTrigger.addAction("fingerprint_generated",(n=>{t.on("change",".rating > input:radio",(function(t){e()(this).ratingSubmission("submit_rate",n)})),t.on("click","#rating_submit",(function(t){t.preventDefault(),e()(this).ratingSubmission("submit_feedback",n)}))}))})),(o=i).fn.ratingSubmission=function(t,e){const n=function(t,e,n=null){PMPRUtil.isEmpty(n)&&(n=PMPRUtil.getSettingByPath("rating.try_again")),PMPRUtil.notify(t,n,0),e&&(l.prop("checked",!1),l.prop("disabled",!1))};let i=o(this),r="",a="submit_rate"===t,s=".rating-message",l=i.parent().find("input"),d=o(".rating-feedback"),c=i.closest(".rating-container").data("post"),p=PMPRUtil.getSettingByPath("rating.threshold");PMPRUtil.notify(s,""),PMPRUtil.getNonceValue(d.find(".nonce-container")).then((function(P){if(t=PMPRUtil.getSettingByPath(`rating.ajax.${t}`),r=a?i.val():o("#rating_feedback").val(),PMPRUtil.isEmpty(t)||PMPRUtil.isEmpty(e)||PMPRUtil.isEmpty(r))n(s,a);else{a&&(i.parent().find("input").prop("disabled",!1),d.hasClass("d-none")||d.addClass("d-none"),l.prop("disabled",!0));let n=PMPRRequest.post(t,{post:c,value:r,owner:e,sec_nonce:P}).setElement(i).setMessageSelector(s);a?n.setSuccess((function(t){PMPRUtil.isEmpty(t)||PMPRUtil.notify(s,t,1e4),r<=p&&!PMPRUtil.isEmpty(d)&&d.removeClass("d-none")})).setError((t=>{PMPRUtil.notify(s,t.data,0)})).setComplete((()=>{l.prop("disabled",!1)})):n.setComplete((()=>{d.addClass("d-none")})),n.send()}})).catch((t=>{console.log(t),n(s,a)}))}})()})();